{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api';\n\nexport const fetchPhotos = (searchedQuery, page) => {\nconst axiosOptions = {\n    params: {\n    key: '45531869-402fff4ce98a39e1a3b7e2442',\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n    },\n};\nreturn axios.get(`/`, axiosOptions);\n};","export const createGalleryCardTemplate = imgInfo => {\nreturn `\n    <li class=\"gallery-card\">\n<a class=\"gallery-link\" href=\"${imgInfo.largeImageURL}\">\n    <img\n    class=\"gallery-img\"\n    src=\"${imgInfo.webformatURL}\"\n    data-source=\"${imgInfo.largeImageURL}\"\n    alt=\"${imgInfo.tags}\"\n    />\n</a>\n<div class=\"wrapper\">\n    <ul class=\"img-content-wrapper\">\n    <li class=\"text-info\">Likes<span class=\"number\">${imgInfo.likes}</span></li>\n    <li class=\"text-info\">Views<span class=\"number\">${imgInfo.views}</span></li>\n    <li class=\"text-info\">Comments<span class=\"number\">${imgInfo.comments}</span></li>\n    <li class=\"text-info\">Downloads<span class=\"number\">${imgInfo.downloads}</span>\n    </li>\n    </ul>\n</div>\n</li>\n`;\n};","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport { fetchPhotos } from './js/pixabay-api';\nimport { createGalleryCardTemplate } from './js/render-functions';\n\nconst searchFormEl = document.querySelector('.js-search-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loader = document.querySelector('.loader');\nconst LoadMoreBtnEl = document.querySelector('.js-load-more');\n\nlet currentPage = 1;\nlet searchedValue = '';\nlet cardHeight = 0;\n\nconst lightBox = new SimpleLightbox('.js-gallery a', {\n    overlay: true,\n    captionsData: 'alt',\n    overlayOpacity: 0.8,\n    captionDelay: 250,\n    focus: true,\n});\n\nfunction showLoader() {\nloader.classList.remove('is-hidden');\n}\nfunction hideLoader() {\nloader.classList.add('is-hidden');\n}\n\nconst onSearchFormSubmit = async event => {\ntry {\n    showLoader();\n    event.preventDefault();\n    searchedValue = searchFormEl.elements.user_query.value.trim();\n    currentPage = 1;\n    const response = await fetchPhotos(searchedValue, currentPage);\n    console.log(response);\n\nif (searchedValue === '') {\n    iziToast.warning({\n        title: 'Caution',\n        message: 'Input field must not be empty',\n        position: 'topLeft',\n    });\n\n    return;\n}\n\nif (response.data.hits.length === 0) {\n    iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'bottomRight',\n    });\n    galleryEl.innerHTML = '';\n    searchFormEl.reset();\n\n    return;\n}\n\nconst galleryCardsTemplate = response.data.hits\n    .map(imgDetails => createGalleryCardTemplate(imgDetails))\n    .join('');\n    galleryEl.innerHTML = galleryCardsTemplate;\n\nconst galleryCardEl = galleryEl.querySelector('li');\ncardHeight = galleryCardEl.getBoundingClientRect().height;\n\nLoadMoreBtnEl.classList.remove('is-hidden');\n\nlightBox.refresh();\n\nconst totalPages = Math.ceil(response.data.totalHits / 15);\n    if (currentPage >= totalPages) {\n        LoadMoreBtnEl.classList.add('is-hidden');\n        iziToast.info({\n            title: 'Info',\n            message: 'We are sorry,but you have reached the end of search results',\n            });\n        }\n    } catch (err) {\n    console.log(err);\n} finally {\n    hideLoader();\n}\nsearchFormEl.reset();\n};\n\nconst onLoadMoreBtnClick = async event => {\ntry {\n    showLoader();\n    currentPage++;\n    const response = await fetchPhotos(searchedValue, currentPage);\n    console.log(response);\n    const galleryCardsTemplate = response.data.hits\n    .map(imgDetails => createGalleryCardTemplate(imgDetails))\n    .join('');\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n    });\n\n    lightBox.refresh();\n\nconst totalPages = Math.ceil(response.data.totalHits / 15);\n    if (currentPage >= totalPages) {\n    LoadMoreBtnEl.classList.add('is-hidden');\n    iziToast.info({\n        title: 'Info',\n        message: 'We are sorry,but you have reached the end of search results',\n    });\n    }\n} catch (err) {\n    console.log(err);\n} finally {\n    hideLoader();\n}\nsearchFormEl.reset();\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nLoadMoreBtnEl.addEventListener('click', onLoadMoreBtnClick);"],"names":["axios","fetchPhotos","searchedQuery","page","axiosOptions","createGalleryCardTemplate","imgInfo","searchFormEl","galleryEl","loader","LoadMoreBtnEl","currentPage","searchedValue","cardHeight","lightBox","SimpleLightbox","showLoader","hideLoader","onSearchFormSubmit","event","response","iziToast","galleryCardsTemplate","imgDetails","totalPages","err","onLoadMoreBtnClick"],"mappings":"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"}